{"version":3,"sources":["assets\\02. Script\\Game.js"],"names":["cc","Class","Component","properties","starPrefab","Prefab","player","Node","scoreDisplay","Label","scoreAudio","type","AudioClip","onLoad","starDuration","score","director","getScheduler","schedule","spawnNewStar","newStar","instantiate","node","addChild","setPosition","getNewStarPosition","getComponent","game","maxY","height","randY","getRandom","maxX","width","randX","v2","min","max","Math","round","random","gainScore","string","audioEngine","playEffect"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAEJ,EAAE,CAACK,MADP;AAERC,IAAAA,MAAM,EAAEN,EAAE,CAACO,IAFH;AAGRC,IAAAA,YAAY,EAAER,EAAE,CAACS,KAHT;AAIRC,IAAAA,UAAU,EAAE;AACRC,MAAAA,IAAI,EAAEX,EAAE,CAACY,SADD;AAER,iBAAQ;AAFA;AAJJ,GAHP;AAcLC,EAAAA,MAAM,EAAE,kBAAY;AAChB;AACA,SAAKC,YAAL,GAAoB,GAApB,CAFgB,CAGhB;;AACA,SAAKC,KAAL,GAAa,CAAb,CAJgB,CAKhB;;AACAf,IAAAA,EAAE,CAACgB,QAAH,CAAYC,YAAZ,GAA2BC,QAA3B,CAAoC,KAAKC,YAAzC,EAAuD,IAAvD,EAA6D,KAAKL,YAAlE;AACH,GArBI;AAuBLK,EAAAA,YAAY,EAAE,wBAAY;AACtB;AACA;AACA,QAAMC,OAAO,GAAGpB,EAAE,CAACqB,WAAH,CAAe,KAAKjB,UAApB,CAAhB;AACA,SAAKkB,IAAL,CAAUC,QAAV,CAAmBH,OAAnB;AACAA,IAAAA,OAAO,CAACI,WAAR,CAAoB,KAAKC,kBAAL,EAApB,EALsB,CAMtB;AACA;AACA;;AACAL,IAAAA,OAAO,CAACM,YAAR,CAAqB,MAArB,EAA6BC,IAA7B,GAAoC,IAApC;AACH,GAjCI;AAmCLF,EAAAA,kBAAkB,EAAE,8BAAY;AAC5B;AACA,QAAIG,IAAI,GAAG,KAAKN,IAAL,CAAUO,MAAV,GAAmB,CAA9B;AACA,QAAIC,KAAK,GAAG,KAAKC,SAAL,CAAe,CAAf,EAAkBH,IAAlB,IAA0B,EAAtC,CAH4B,CAK5B;AACA;AACA;;AACA,QAAII,IAAI,GAAG,KAAKV,IAAL,CAAUW,KAAV,GAAkB,EAA7B,CAR4B,CAS5B;AACA;AACA;;AACA,QAAIC,KAAK,GAAG,KAAKH,SAAL,CAAe,CAAf,EAAkBC,IAAlB,IAA0B,GAAtC,CAZ4B,CAc5B;;AACA,WAAOhC,EAAE,CAACmC,EAAH,CAAMD,KAAN,EAAaJ,KAAb,CAAP;AACH,GAnDI;AAqDLC,EAAAA,SAAS,EAAE,mBAAUK,GAAV,EAAeC,GAAf,EAAoB;AAC3B,WAAOC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBH,GAAG,GAAGD,GAAvB,IAA8BA,GAAzC,CAAP;AACH,GAvDI;AAyDLK,EAAAA,SAAS,EAAE,qBAAY;AACnB,SAAK1B,KAAL,IAAc,CAAd;AACA,SAAKP,YAAL,CAAkBkC,MAAlB,GAA2B,aAAa,KAAK3B,KAA7C,CAFmB,CAGnB;;AACAf,IAAAA,EAAE,CAAC2C,WAAH,CAAeC,UAAf,CAA0B,KAAKlC,UAA/B,EAA2C,KAA3C;AACH;AA9DI,CAAT","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        starPrefab: cc.Prefab,\r\n        player: cc.Node,\r\n        scoreDisplay: cc.Label,\r\n        scoreAudio: {\r\n            type: cc.AudioClip,\r\n            default:null,\r\n        }\r\n    },\r\n\r\n\r\n    onLoad: function () {\r\n        // 별의 지속시간 설정.\r\n        this.starDuration = 3.0;\r\n        // 득점 초기화.\r\n        this.score = 0;\r\n        // 새로운 별 계속 생성, 별의 지속 시간 참조.\r\n        cc.director.getScheduler().schedule(this.spawnNewStar, this, this.starDuration);\r\n    },\r\n\r\n    spawnNewStar: function () {\r\n        // 프리팹을 사용하여 새 노드 생성.\r\n        // instantiate = 객체 복사 함수.(프리팹을 넣어도 된다.)\r\n        const newStar = cc.instantiate(this.starPrefab);\r\n        this.node.addChild(newStar);\r\n        newStar.setPosition(this.getNewStarPosition());\r\n        // 스타 프리팹을 만들고, \r\n        // 겟 컴포넌트를 통해 Star 를 구하고,\r\n        // 해당 프리팹의 game 변수 안에 나 자신(Game.js)의 참조를 넣는다. \r\n        newStar.getComponent('Star').game = this;\r\n    },\r\n\r\n    getNewStarPosition: function () {\r\n        // 지면보다는 높고, Canvas의 높이보단 아래로.\r\n        var maxY = this.node.height / 2;\r\n        var randY = this.getRandom(0, maxY) - 60;\r\n        \r\n        // 현재 캔버스 넓이는 960이다.\r\n        // 960에 딱 맞게 Star 인스턴스가 끝 쪽에 생성이 되면 \r\n        // 짤려 보일 수도 있다. 그래서 -60 을 한다. \r\n        var maxX = this.node.width - 60;\r\n        // 또한 캐릭터는 -450 ~ +450 위치에 있으므로,\r\n        // 최솟값 0, 최댓값 900의 결과값에서 -450 을 빼줘야,\r\n        // -450 ~ +450 안에서 랜덤값을 얻을 수 있다.\r\n        var randX = this.getRandom(0, maxX) - 450;\r\n\r\n        // 랜덤 좌표 반환.\r\n        return cc.v2(randX, randY);\r\n    },\r\n\r\n    getRandom: function (min, max) {\r\n        return Math.round(Math.random() * (max - min) + min);\r\n    },\r\n    \r\n    gainScore: function () {\r\n        this.score += 1;\r\n        this.scoreDisplay.string = \"Score : \" + this.score;\r\n        // false = 자동재생 여부 = No.\r\n        cc.audioEngine.playEffect(this.scoreAudio, false);\r\n    }\r\n});\r\n"]}